(this.webpackJsonpprojeto_react=this.webpackJsonpprojeto_react||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(20),r=n.n(c),i=(n(26),n(11)),o=n.n(i),l=n(13),d=n(4),u=n(5),p=n(7),h=n(6),m=n(15),j=n(2),b=n.p+"static/media/logo2.9050ce99.png",f=(n(28),n(0)),y=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"page-title",children:[Object(f.jsx)("h2",{children:this.props.title}),this.props.scroll?Object(f.jsxs)("div",{onClick:this.props.scrollFunction,children:[Object(f.jsx)("p",{children:"Back To Top"}),Object(f.jsx)("i",{className:"fa fa-arrow-circle-up","aria-hidden":"true"})]}):null]})}}]),n}(s.a.Component),v=(n(30),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("button",{className:this.props.classN,onClick:this.props.onClickFunction,type:this.props.type?this.props.type:"button",children:this.props.displayText})}}]),n}(s.a.Component)),O=(n(31),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={availableCards:[{card_number:"1111111111111111",cvv:789,expiry_date:"01/18"},{card_number:"4111111111111234",cvv:123,expiry_date:"01/20"}],submittedFormData:{inputValue:"",selectCard:""}},e.sendPaymentRequest=function(t){t.preventDefault(),console.log("sending payment request");var n=e.validateCard(),a=e.validateValue(),s={card_number:n.card_number,cvv:n.cvv,expiry_date:n.expiry_date,destination_user_id:e.props.clickedUser.id,value:a};1!=e.printValidationMsg(s)?(e.closeModal(),s=JSON.stringify(s),fetch("https://run.mocky.io/v3/533cd5d7-63d3-4488-bf8d-4bb8c751c989",{method:"POST",body:s}).then((function(e){return e.json()})).then((function(t){e.props.paymentReceiptCallback(t)}))):console.log("sending payment request failed")},e.closeModal=function(){e.props.closeModal(),document.querySelector("form").reset(),e.setState({submittedFormData:{inputValue:"",selectCard:""}}),document.querySelector("#select-card-wrapper *:nth-child(1)").style.display="none",document.querySelector("#input-value-wrapper *:nth-child(1)").style.display="none"},e}return Object(u.a)(n,[{key:"validateCard",value:function(){var e=this,t={card_number:!1,cvv:!1,expiry_date:!1};return this.state.availableCards.forEach((function(n){n.card_number.substr(-4)==e.state.submittedFormData.selectCard&&(t=n)})),t}},{key:"validateValue",value:function(){var e=this.state.submittedFormData.inputValue;return""!=e&&void 0!=e||(e=!1),e}},{key:"printValidationMsg",value:function(e){var t=!1;return document.querySelector("#select-card-wrapper *:nth-child(1)").style.display="none",document.querySelector("#input-value-wrapper *:nth-child(1)").style.display="none",0==e.card_number&&(document.querySelector("#select-card-wrapper *:nth-child(1)").style.display="block",t=!0),0==e.value&&(document.querySelector("#input-value-wrapper *:nth-child(1)").style.display="block",t=!0),t}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"payment-modal-wrapper",style:{display:this.props.display},children:[Object(f.jsxs)("div",{className:"payment-modal",children:[Object(f.jsxs)("div",{className:"modal-title",children:[Object(f.jsxs)("p",{children:["Pagamento para ",Object(f.jsx)("span",{children:this.props.clickedUser.name})]}),Object(f.jsx)("i",{className:"fa fa-times-circle","aria-hidden":"true",onClick:this.closeModal})]}),Object(f.jsx)("div",{className:"modal-body",children:Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{id:"input-value-wrapper",children:[Object(f.jsx)("small",{children:"O campo abaixo \xe9 obrigat\xf3rio"}),Object(f.jsx)("input",{type:"number",placeholder:"R$ 0,00",onChange:function(t){return e.setState((function(e){return e.submittedFormData.inputValue=t.target.value,e}))}})]}),Object(f.jsxs)("div",{id:"select-card-wrapper",children:[Object(f.jsx)("small",{children:"O campo abaixo \xe9 obrigat\xf3rio"}),Object(f.jsxs)("select",{defaultValue:"",onChange:function(t){return e.setState((function(e){return e.submittedFormData.selectCard=t.target.value,e}))},children:[Object(f.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Selecione um cart\xe3o"}),this.state.availableCards.map((function(e,t){return Object(f.jsxs)("option",{value:e.card_number.substr(-4),children:["Cart\xe3o com final ",e.card_number.substr(-4)]},"select-opt-"+t)}))]})]}),Object(f.jsx)("div",{children:Object(f.jsx)(v,{classN:"pay-button",type:"submit",displayText:"Pagar",onClickFunction:this.sendPaymentRequest})})]})})]}),Object(f.jsx)("div",{className:"screen-block"})]})}}]),n}(s.a.Component)),x=(n(32),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"receipt-modal-wrapper",style:{display:this.props.display},children:[Object(f.jsxs)("div",{className:"receipt-modal",children:[Object(f.jsxs)("div",{className:"modal-title",children:[Object(f.jsx)("p",{children:"Recibo de Pagamento"}),Object(f.jsx)("i",{className:"fa fa-times-circle","aria-hidden":"true",onClick:this.props.closeModal})]}),Object(f.jsxs)("div",{className:"modal-body",children:[Object(f.jsxs)("p",{children:["O pagamento ",Object(f.jsx)("span",{children:1==this.props.receipt.success?"":"n\xe3o"})," foi conclu\xeddo com sucesso."]}),Object(f.jsx)("div",{children:Object(f.jsx)(v,{classN:"pay-button",type:"button",displayText:"Confirmar",onClickFunction:this.props.closeModal})})]})]}),Object(f.jsx)("div",{className:"screen-block"})]})}}]),n}(s.a.Component)),g=(n(33),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={usersData:[],contentScrollIndex:6,clickedUser:{id:"",name:"",username:""},paymentReceiptResponse:{status:"",success:""},paymentModalDisplay:"none",receiptMsgModalDisplay:"none"},e.handleContentScroll=function(t){var n=t.target;n.scrollHeight-n.scrollTop===n.clientHeight&&(e.state.contentScrollIndex<=e.state.usersData.length?(console.log("end of scroll at scroll-index ".concat(e.state.contentScrollIndex," rendering new users...")),e.setState({contentScrollIndex:e.state.contentScrollIndex+4})):console.log("end of scroll at scroll-index ".concat(e.state.contentScrollIndex," there are no more users to be rendered...")))},e.contentScrollToTop=function(e){window.scrollTo({top:0,behavior:"smooth"}),document.querySelector(".user-list").scrollTo({top:0,behavior:"smooth"})},e.closePaymentModal=function(){console.log("payment modal closed"),e.setState({clickedUser:{id:"",name:"",username:""},paymentModalDisplay:"none"})},e.closeReceiptMsgModal=function(){console.log("receipt modal closed"),e.setState({paymentReceiptResponse:{status:"",success:""},receiptMsgModalDisplay:"none"})},e.paymentReceiptCallback=function(t){e.setState({paymentReceiptResponse:t}),e.openReceiptMsgModal()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("user-listing page loaded"),fetch("https://www.mocky.io/v2/5d531c4f2e0000620081ddce",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({usersData:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"openPaymentModal",value:function(e,t,n){console.log("payment modal opened"),this.setState({clickedUser:{id:e,name:t,username:n},paymentModalDisplay:"block"})}},{key:"openReceiptMsgModal",value:function(e,t){console.log("receipt modal opened"),this.setState({receiptMsgModalDisplay:"block"})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"App-user-listing",children:[Object(f.jsx)(y,{title:"Listagem de Usu\xe1rios",scroll:"true",scrollFunction:this.contentScrollToTop}),Object(f.jsx)("div",{className:"user-list",onScroll:this.handleContentScroll,children:this.state.usersData.map((function(t,n){if(n<e.state.contentScrollIndex)return Object(f.jsx)("div",{className:"user-row",children:Object(f.jsxs)("div",{className:"user-wrapper",children:[Object(f.jsxs)("div",{className:"user-data-wrapper",children:[Object(f.jsx)("figure",{children:Object(f.jsx)("img",{src:t.img,alt:"Foto do Usu\xe1rio"+t.name})}),Object(f.jsxs)("div",{className:"user-data",children:[Object(f.jsx)("div",{className:"user-name",children:t.name}),Object(f.jsxs)("div",{className:"user-id-username",children:["ID: ",t.id," - Username: ",t.username]})]})]}),Object(f.jsx)("div",{children:Object(f.jsx)(v,{classN:"pay-button",onClickFunction:function(){return e.openPaymentModal(t.id,t.name,t.username)},displayText:"Pagar"})})]})},"user-row-"+n)}))}),Object(f.jsx)(O,{clickedUser:this.state.clickedUser,display:this.state.paymentModalDisplay,closeModal:this.closePaymentModal,paymentReceiptCallback:this.paymentReceiptCallback}),Object(f.jsx)(x,{receipt:this.state.paymentReceiptResponse,display:this.state.receiptMsgModalDisplay,closeModal:this.closeReceiptMsgModal})]})}}]),n}(s.a.Component)),k=(n(34),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={usersData:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://www.mocky.io/v2/5d531c4f2e0000620081ddce",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({usersData:e})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"home-content",children:[Object(f.jsx)(y,{title:"Home"}),Object(f.jsxs)("div",{className:"App-description-wrapper",children:[Object(f.jsx)("div",{className:"App-description-title",children:Object(f.jsx)("h3",{children:"Application Description"})}),Object(f.jsx)("div",{className:"App-description-text",children:Object(f.jsx)("p",{children:"Here i shall tell a bit more about this project. It's based on Picpay's test but with a few more stuff. Using react to build a SPA where a user could use it to pay others users from a list, this list should be brought from an API request. The user then could scroll down the list with infinite scrolling technique, which makes it more mobile friendly rather than clicking paginations while keeping performance on loading, and choose an user to click on its pay button. After that, a payment modal would open and then allow the user to input the payment value, choose one of the registered credit cards and click the submit button. When the payment modal is submitted, the application would start an API post request sending along with it the inputed data and the incoming data from the selected user to be paid, this API would answer confirmation or failure and a response modal would be shown to the user with the respective confirmation answer."})})]})]})}}]),n}(s.a.Component)),w=(n(35),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={firstLoading:!0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(m.a,{children:[1==this.state.firstLoading?Object(f.jsx)(j.a,{to:"/UserListing"}):this.setState({firstLoading:!1}),Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("img",{src:b,className:"App-logo asda",alt:"logo"}),Object(f.jsx)("h1",{className:"App-title",children:"Payments App"}),Object(f.jsxs)("nav",{className:"App-nav",children:[Object(f.jsx)(m.b,{exact:!0,to:"/",className:"App-link",activeClassName:"App-link-CurrentPage",children:"Home"}),Object(f.jsx)(m.b,{exact:!0,to:"/UserListing",className:"App-link",activeClassName:"App-link-CurrentPage",children:"Users"})]})]}),Object(f.jsx)("div",{className:"App-content",children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{path:"/",exact:!0,component:k}),Object(f.jsx)(j.b,{path:"/UserListing",exact:!0,component:function(){return Object(f.jsx)(g,{scrollFunction:"this.contentScrollPage"})}})]})}),Object(f.jsx)("footer",{className:"App-footer",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"This is the Footer Title"}),Object(f.jsx)("p",{children:"This is the footer paragraph, to write nothing or anything you want. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae quam mauris. Maecenas convallis luctus sem, euismod rutrum odio tempus ut."}),Object(f.jsx)("small",{children:"\xa9 2021 BrandGoesHere. All Rights Reserved."})]})})]})})}}]),n}(s.a.Component)),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),N()}},[[44,1,2]]]);
//# sourceMappingURL=main.3fb6ef4f.chunk.js.map